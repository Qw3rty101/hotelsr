<ion-content [fullscreen]="true">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Room Information</ion-card-title>
      <ion-card-subtitle>Details</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-grid>
          <ion-row>
            <ion-col class="ion-text-end">
              Ready(qty)
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-item *ngFor="let room of rooms">
          <ion-thumbnail slot="start">
            <img alt="Silhouette of mountains" [src]="room.img_path" />
          </ion-thumbnail>
          <ion-grid>
            <ion-row>
              <ion-col>
                <ion-label>{{ room.name_room }}</ion-label>
              </ion-col>
              <ion-col class="ion-text-end">
                {{ room.qty }}
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      </ion-list>
      <ion-button expand="block" (click)="setOpen(true)">Check details order</ion-button>
      <ion-button color="danger" expand="block" (click)="logout()">logout</ion-button>
    </ion-card-content>
  </ion-card>

  <ion-modal [isOpen]="isModalOpen">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Room details</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="setOpen(false)">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-list lines="none">
          <ion-item>
            <ion-label>Raffel Room</ion-label>
          </ion-item>
          <ng-container *ngFor="let order of orders">
            <ion-list lines="none" *ngIf="order.id_room == 1 && order.status_order == 'Booking' ">
              <ion-item class="left-line">
                <ion-label>{{ order.order_at }}</ion-label>
                <ion-label>({{ order.status_order }})</ion-label>
                <ion-button color="danger" expand="block" (click)="cancel(order.id_order)">Delete order</ion-button>
              </ion-item>
            </ion-list>
          </ng-container>
          <ion-item>
            <ion-label>Laffrel Room</ion-label>
          </ion-item>
          <ng-container *ngFor="let order of orders">
            <ion-list lines="none" *ngIf="order.id_room == 2 && order.status_order == 'Booking'">
              <ion-item class="left-line">
                <ion-label>{{ order.order_at }}</ion-label>
                <ion-label>({{ order.status_order }})</ion-label>
                <ion-button color="danger" expand="block" (click)="cancel(order.id_order)">Delete order</ion-button>
              </ion-item>
            </ion-list>
          </ng-container>
          <ion-item>
            <ion-label>Cupid Room</ion-label>
          </ion-item>
          <ng-container *ngFor="let order of orders">
            <ion-list lines="none" *ngIf="order.id_room == 3 && order.status_order == 'Booking'">
              <ion-item class="left-line">
                <ion-label>{{ order.order_at }}</ion-label>
                <ion-label>({{ order.status_order }})</ion-label>
                <ion-button color="danger" expand="block" (click)="cancel(order.id_order)">Delete order</ion-button>
              </ion-item>
            </ion-list>
          </ng-container>
          <ion-item>
            <ion-label>Meeting Room</ion-label>
          </ion-item>
          <ng-container *ngFor="let order of orders">
            <ion-list lines="none" *ngIf="order.id_room == 4 && order.status_order == 'Booking'">
              <ion-item class="left-line">
                <ion-label>{{ order.order_at }}</ion-label>
                <ion-label>({{ order.status_order }})</ion-label>
                <ion-button color="danger" expand="block" (click)="cancel(order.id_order)">Delete order</ion-button>
              </ion-item>
            </ion-list>
          </ng-container>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
